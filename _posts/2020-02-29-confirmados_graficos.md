---
keywords: fastai
description: Gráficos de acumulado de infectados confirmados.
title: Confirmados - gráficos
toc: false 
badges: false
comments: false
nb_path: _notebooks/2020-02-29-confirmados_graficos.ipynb
layout: notebook
---

<!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-02-29-confirmados_graficos.ipynb
-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<details class="description">
      <summary class="btn btn-sm" data-open="Hide Code" data-close="Show Code"></summary>
        <p><div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#collapse</span>

<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">altair</span> <span class="k">as</span> <span class="nn">alt</span>

<span class="c1"># data download</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://docs.google.com/spreadsheet/ccc?key=1FwOXbkWeuS1LHrKxhSfepGtsgQ6iIEQZmWig_JKo8z0&amp;output=csv&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">&#39;Wrong status code&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Fecha&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># plot</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">df</span>

<span class="c1"># Create a selection that chooses the nearest point &amp; selects based on x-value</span>
<span class="n">nearest</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;single&#39;</span><span class="p">,</span> <span class="n">nearest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span>
                        <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Total confirmados&#39;</span><span class="p">],</span> <span class="n">empty</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>

<span class="c1"># The basic line</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">interpolate</span><span class="o">=</span><span class="s1">&#39;basis&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;monthdate(Fecha):O&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Total confirmados:Q&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Transparent selectors across the chart. This is what tells us</span>
<span class="c1"># the x-value of the cursor</span>
<span class="n">selectors</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;monthdate(Fecha):O&#39;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span>
    <span class="n">nearest</span>
<span class="p">)</span>

<span class="c1"># Draw points on the line, and highlight based on selection</span>
<span class="n">points</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">opacity</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">nearest</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Draw text labels near the points, and highlight based on selection</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">mark_text</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">dx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">dy</span><span class="o">=-</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">text</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="n">nearest</span><span class="p">,</span> <span class="s1">&#39;Total confirmados:Q&#39;</span><span class="p">,</span> <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">))</span>
<span class="p">)</span>

<span class="c1"># Draw a rule at the location of the selection</span>
<span class="n">rules</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">mark_rule</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;monthdate(Fecha):O&#39;</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span>
    <span class="n">nearest</span>
<span class="p">)</span>

<span class="c1"># Put the five layers into a chart and bind the data</span>
<span class="n">alt</span><span class="o">.</span><span class="n">layer</span><span class="p">(</span>
    <span class="n">line</span><span class="p">,</span> <span class="n">selectors</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">rules</span><span class="p">,</span> <span class="n">text</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">400</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>
</p>
    </details>
<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">

<div id="altair-viz-b40bf2e45a964a198919680a1ebda514"></div>
<script type="text/javascript">
  (function(spec, embedOpt){
    const outputDiv = document.getElementById("altair-viz-b40bf2e45a964a198919680a1ebda514");
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm//vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm//vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm//vega-lite@4.0.2?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm//vega-embed@6?noext",
    };

    function loadScript(lib) {
      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        s.src = paths[lib];
        s.async = true;
        s.onload = () => resolve(paths[lib]);
        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
        document.getElementsByTagName("head")[0].appendChild(s);
      });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else if (typeof vegaEmbed === "function") {
      displayChart(vegaEmbed);
    } else {
      loadScript("vega")
        .then(() => loadScript("vega-lite"))
        .then(() => loadScript("vega-embed"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "layer": [{"mark": {"type": "line", "interpolate": "basis"}, "encoding": {"x": {"type": "ordinal", "field": "Fecha", "timeUnit": "monthdate"}, "y": {"type": "quantitative", "field": "Total confirmados"}}}, {"mark": "point", "encoding": {"opacity": {"value": 0}, "x": {"type": "ordinal", "field": "Fecha", "timeUnit": "monthdate"}}, "selection": {"selector001": {"type": "single", "nearest": true, "on": "mouseover", "fields": ["Total confirmados"], "empty": "none"}}}, {"mark": "point", "encoding": {"opacity": {"condition": {"value": 1, "selection": "selector001"}, "value": 0}, "x": {"type": "ordinal", "field": "Fecha", "timeUnit": "monthdate"}, "y": {"type": "quantitative", "field": "Total confirmados"}}}, {"mark": {"type": "rule", "color": "gray"}, "encoding": {"x": {"type": "ordinal", "field": "Fecha", "timeUnit": "monthdate"}}, "transform": [{"filter": {"selection": "selector001"}}]}, {"mark": {"type": "text", "align": "left", "dx": 5, "dy": -5}, "encoding": {"text": {"condition": {"type": "quantitative", "field": "Total confirmados", "selection": "selector001"}, "value": " "}, "x": {"type": "ordinal", "field": "Fecha", "timeUnit": "monthdate"}, "y": {"type": "quantitative", "field": "Total confirmados"}}}], "data": {"name": "data-8bbf504f7460ef4d97da203b4c06ee84"}, "height": 400, "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v4.0.2.json", "datasets": {"data-8bbf504f7460ef4d97da203b4c06ee84": [{"Fecha": "2020-01-31T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-01T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-02T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-03T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-04T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-05T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-06T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-07T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-08T00:00:00", "Arag\u00f3n": 0, "Baleares": 0, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 1}, {"Fecha": "2020-02-09T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-10T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-11T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-12T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-13T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-14T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-15T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-16T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-17T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-18T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-19T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-20T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-21T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-22T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-23T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 1, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 2}, {"Fecha": "2020-02-24T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 2, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 3}, {"Fecha": "2020-02-25T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 2, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 3}, {"Fecha": "2020-02-26T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 2, "Catalu\u00f1a": 0, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 0, "Comunidad Valenciana": 0, "Andaluc\u00eda": 0, "Total confirmados": 3}, {"Fecha": "2020-02-27T00:00:00", "Arag\u00f3n": 0, "Baleares": 1, "Canarias": 6, "Catalu\u00f1a": 3, "Castilla y Le\u00f3n": 0, "Comunidad de Madrid": 4, "Comunidad Valenciana": 2, "Andaluc\u00eda": 1, "Total confirmados": 17}, {"Fecha": "2020-02-28T00:00:00", "Arag\u00f3n": 1, "Baleares": 1, "Canarias": 6, "Catalu\u00f1a": 3, "Castilla y Le\u00f3n": 2, "Comunidad de Madrid": 5, "Comunidad Valenciana": 9, "Andaluc\u00eda": 7, "Total confirmados": 34}]}}, {"mode": "vega-lite"});
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

